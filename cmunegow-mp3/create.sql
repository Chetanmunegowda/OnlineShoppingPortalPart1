CREATE TABLE USERS (USERID BIGINT NOT NULL, DTYPE VARCHAR(31), USERNAME VARCHAR(255), USERPASSWORD VARCHAR(255), PRIMARY KEY (USERID))
CREATE TABLE Customers (USERID BIGINT NOT NULL, CARDNUMBER VARCHAR(20) UNIQUE, CUSTAGE INTEGER, CUSTEMAIL VARCHAR(45) NOT NULL UNIQUE, CUSTNAME VARCHAR(40) NOT NULL UNIQUE, CUSTPHONE VARCHAR(20) NOT NULL UNIQUE, custAddressId BIGINT NOT NULL UNIQUE, PRIMARY KEY (USERID))
CREATE TABLE CustomerAddress (CUSTADDRESSID BIGINT NOT NULL, custAddrStreet1 VARCHAR(255) NOT NULL, custAddrCity VARCHAR(255) NOT NULL, custAddrCountry VARCHAR(255) NOT NULL, custAddrState VARCHAR(255) NOT NULL, custAddrStreet2 VARCHAR(255), custAddrZipCode VARCHAR(255) NOT NULL, PRIMARY KEY (CUSTADDRESSID))
CREATE TABLE CATEGORY (CATID BIGINT NOT NULL, CATNAME VARCHAR(50) NOT NULL UNIQUE, PRIMARY KEY (CATID))
CREATE TABLE Items (ITEMID BIGINT NOT NULL, ITEMAVAILABILITY TINYINT(1) default 0 NOT NULL, ITEMCOST INTEGER NOT NULL, ITEMNAME VARCHAR(30) NOT NULL UNIQUE, ITEMQUANTITY INTEGER NOT NULL, PRIMARY KEY (ITEMID))
CREATE TABLE OrderItems (ITEMID BIGINT NOT NULL, ORDERITEMID BIGINT NOT NULL, ORDITEMCOST INTEGER, ORDITEMQUANTITY INTEGER, orderId BIGINT, PRIMARY KEY (ITEMID, ORDERITEMID))
CREATE TABLE Orders (ORDERID BIGINT NOT NULL, ORDCANCELDATE DATETIME, ORDCREATIONDATE DATETIME NOT NULL, ORDDELIVERDATE DATETIME, ORDSTATUS VARCHAR(255) NOT NULL, ORDTOTAMOUNT INTEGER NOT NULL, paymentId BIGINT NOT NULL UNIQUE, userId BIGINT, PRIMARY KEY (ORDERID))
CREATE TABLE PAYMENT (PAYMENTID BIGINT NOT NULL, PMODE VARCHAR(255) UNIQUE, PRIMARY KEY (PAYMENTID))
CREATE TABLE SHIPPER (SHIPID BIGINT NOT NULL, SHIPNAME VARCHAR(50) NOT NULL UNIQUE, SHIPPHONE VARCHAR(255) NOT NULL UNIQUE, PRIMARY KEY (SHIPID))
CREATE TABLE Suppliers (USERID BIGINT NOT NULL, SUPEMAIL VARCHAR(45) NOT NULL UNIQUE, SUPPHONE VARCHAR(20) NOT NULL UNIQUE, supAddrId BIGINT NOT NULL UNIQUE, PRIMARY KEY (USERID))
CREATE TABLE SUPPLIERADDRESS (SUPADDRESSID BIGINT NOT NULL, supAddrStreet1 VARCHAR(255) NOT NULL, supAddrCity VARCHAR(255) NOT NULL, supAddrCountry VARCHAR(255) NOT NULL, supAddrState VARCHAR(255) NOT NULL, supAddrStreet2 VARCHAR(255), supAddrZipCode VARCHAR(255) NOT NULL, PRIMARY KEY (SUPADDRESSID))
CREATE TABLE Item_Category (catId BIGINT NOT NULL, itemId BIGINT NOT NULL, PRIMARY KEY (catId, itemId))
CREATE TABLE Suplr_Items (itemId BIGINT NOT NULL, supId BIGINT NOT NULL, PRIMARY KEY (itemId, supId))
CREATE TABLE Suplr_Shipper (shipperId BIGINT NOT NULL, supId BIGINT NOT NULL, PRIMARY KEY (shipperId, supId))
ALTER TABLE Customers ADD CONSTRAINT FK_Customers_custAddressId FOREIGN KEY (custAddressId) REFERENCES CustomerAddress (CUSTADDRESSID)
ALTER TABLE Customers ADD CONSTRAINT FK_Customers_USERID FOREIGN KEY (USERID) REFERENCES USERS (USERID)
ALTER TABLE OrderItems ADD CONSTRAINT FK_OrderItems_orderId FOREIGN KEY (orderId) REFERENCES Orders (ORDERID)
ALTER TABLE Orders ADD CONSTRAINT FK_Orders_userId FOREIGN KEY (userId) REFERENCES USERS (USERID)
ALTER TABLE Orders ADD CONSTRAINT FK_Orders_paymentId FOREIGN KEY (paymentId) REFERENCES PAYMENT (PAYMENTID)
ALTER TABLE Suppliers ADD CONSTRAINT FK_Suppliers_supAddrId FOREIGN KEY (supAddrId) REFERENCES SUPPLIERADDRESS (SUPADDRESSID)
ALTER TABLE Suppliers ADD CONSTRAINT FK_Suppliers_USERID FOREIGN KEY (USERID) REFERENCES USERS (USERID)
ALTER TABLE Item_Category ADD CONSTRAINT FK_Item_Category_itemId FOREIGN KEY (itemId) REFERENCES Items (ITEMID)
ALTER TABLE Item_Category ADD CONSTRAINT FK_Item_Category_catId FOREIGN KEY (catId) REFERENCES CATEGORY (CATID)
ALTER TABLE Suplr_Items ADD CONSTRAINT FK_Suplr_Items_itemId FOREIGN KEY (itemId) REFERENCES Items (ITEMID)
ALTER TABLE Suplr_Items ADD CONSTRAINT FK_Suplr_Items_supId FOREIGN KEY (supId) REFERENCES USERS (USERID)
ALTER TABLE Suplr_Shipper ADD CONSTRAINT FK_Suplr_Shipper_shipperId FOREIGN KEY (shipperId) REFERENCES SHIPPER (SHIPID)
ALTER TABLE Suplr_Shipper ADD CONSTRAINT FK_Suplr_Shipper_supId FOREIGN KEY (supId) REFERENCES USERS (USERID)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
